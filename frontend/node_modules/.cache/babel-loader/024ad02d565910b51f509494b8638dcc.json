{"ast":null,"code":"import _defineProperty from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"../../axios\";export var fetchDishes=createAsyncThunk('dishes/fetchDishes',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/dishes');case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);})));export var fetchRemoveDish=createAsyncThunk('dishes/fetchRemoveDish',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"/dishes/\".concat(id));case 2:response=_context2.sent;return _context2.abrupt(\"return\",{id:id});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());// export const fetchUpdateMenu = createAsyncThunk('dishes/fetchUpdateMenu', async ({ id, flag }) => {\n//     const response = await axios.patch(`/menu/${id}`, flag);\n//     return { id };\n// });\nvar initialState={dishes:{items:[],status:'loading'}};var dishesSlice=createSlice({name:'dishes',initialState:initialState,reducer:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchDishes.pending,function(state){state.dishes.status='loading';}),_defineProperty(_extraReducers,fetchDishes.fulfilled,function(state,action){state.dishes.items=action.payload;state.dishes.status='loaded';}),_defineProperty(_extraReducers,fetchDishes.rejected,function(state){state.dishes.items=[];state.dishes.status='error';}),_defineProperty(_extraReducers,fetchRemoveDish.pending,function(state,action){state.dishes.items=state.dishes.items.filter(function(obj){return obj._id!==action.meta.arg;});}),_extraReducers)});export var dishesReducer=dishesSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","fetchDishes","get","data","fetchRemoveDish","id","delete","response","initialState","dishes","items","status","dishesSlice","name","reducer","extraReducers","pending","state","fulfilled","action","payload","rejected","filter","obj","_id","meta","arg","dishesReducer"],"sources":["C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/src/redux/slices/dishes.js"],"sourcesContent":["import {createSlice, createAsyncThunk} from \"@reduxjs/toolkit\";\r\nimport axios from \"../../axios\";\r\n\r\nexport const fetchDishes = createAsyncThunk('dishes/fetchDishes', async () => {\r\n    const {data} = await axios.get('/dishes');\r\n    return data;\r\n});\r\n\r\nexport const fetchRemoveDish = createAsyncThunk('dishes/fetchRemoveDish', async (id) => {\r\n    const response = await axios.delete(`/dishes/${id}`)\r\n    return {id};\r\n});\r\n\r\n// export const fetchUpdateMenu = createAsyncThunk('dishes/fetchUpdateMenu', async ({ id, flag }) => {\r\n//     const response = await axios.patch(`/menu/${id}`, flag);\r\n//     return { id };\r\n// });\r\n\r\nconst initialState = {\r\n    dishes: {\r\n        items: [],\r\n        status: 'loading'\r\n    },\r\n};\r\n\r\nconst dishesSlice = createSlice({\r\n    name: 'dishes',\r\n    initialState,\r\n    reducer: {},\r\n    extraReducers: {\r\n        // Получение блюд\r\n        [fetchDishes.pending]: (state) => {\r\n            state.dishes.status = 'loading';\r\n        },\r\n        [fetchDishes.fulfilled]: (state, action) => {\r\n            state.dishes.items = action.payload;\r\n            state.dishes.status = 'loaded';\r\n        },\r\n        [fetchDishes.rejected]: (state) => {\r\n            state.dishes.items = [];\r\n            state.dishes.status = 'error';\r\n        },\r\n\r\n        // Удаление блюд\r\n        [fetchRemoveDish.pending]: (state, action) => {\r\n            state.dishes.items = state.dishes.items.filter(obj => obj._id !== action.meta.arg);\r\n        },\r\n\r\n\r\n\r\n    },\r\n});\r\n\r\nexport const dishesReducer = dishesSlice.reducer;"],"mappings":"4cAAA,OAAQA,WAAR,CAAqBC,gBAArB,KAA4C,kBAA5C,CACA,MAAOC,MAAP,KAAkB,aAAlB,CAEA,MAAO,IAAMC,YAAW,CAAGF,gBAAgB,CAAC,oBAAD,wEAAuB,qLACzCC,MAAK,CAACE,GAAN,CAAU,SAAV,CADyC,uCACvDC,IADuD,kBACvDA,IADuD,iCAEvDA,IAFuD,wDAAvB,GAApC,CAKP,MAAO,IAAMC,gBAAe,CAAGL,gBAAgB,CAAC,wBAAD,6FAA2B,kBAAOM,EAAP,4JAC/CL,MAAK,CAACM,MAAN,mBAAwBD,EAAxB,EAD+C,QAChEE,QADgE,iDAE/D,CAACF,EAAE,CAAFA,EAAD,CAF+D,0DAA3B,gEAAxC,CAKP;AACA;AACA;AACA;AAEA,GAAMG,aAAY,CAAG,CACjBC,MAAM,CAAE,CACJC,KAAK,CAAE,EADH,CAEJC,MAAM,CAAE,SAFJ,CADS,CAArB,CAOA,GAAMC,YAAW,CAAGd,WAAW,CAAC,CAC5Be,IAAI,CAAE,QADsB,CAE5BL,YAAY,CAAZA,YAF4B,CAG5BM,OAAO,CAAE,EAHmB,CAI5BC,aAAa,mDAERd,WAAW,CAACe,OAFJ,CAEc,SAACC,KAAD,CAAW,CAC9BA,KAAK,CAACR,MAAN,CAAaE,MAAb,CAAsB,SAAtB,CACH,CAJQ,iCAKRV,WAAW,CAACiB,SALJ,CAKgB,SAACD,KAAD,CAAQE,MAAR,CAAmB,CACxCF,KAAK,CAACR,MAAN,CAAaC,KAAb,CAAqBS,MAAM,CAACC,OAA5B,CACAH,KAAK,CAACR,MAAN,CAAaE,MAAb,CAAsB,QAAtB,CACH,CARQ,iCASRV,WAAW,CAACoB,QATJ,CASe,SAACJ,KAAD,CAAW,CAC/BA,KAAK,CAACR,MAAN,CAAaC,KAAb,CAAqB,EAArB,CACAO,KAAK,CAACR,MAAN,CAAaE,MAAb,CAAsB,OAAtB,CACH,CAZQ,iCAeRP,eAAe,CAACY,OAfR,CAekB,SAACC,KAAD,CAAQE,MAAR,CAAmB,CAC1CF,KAAK,CAACR,MAAN,CAAaC,KAAb,CAAqBO,KAAK,CAACR,MAAN,CAAaC,KAAb,CAAmBY,MAAnB,CAA0B,SAAAC,GAAG,QAAIA,IAAG,CAACC,GAAJ,GAAYL,MAAM,CAACM,IAAP,CAAYC,GAA5B,EAA7B,CAArB,CACH,CAjBQ,iBAJe,CAAD,CAA/B,CA4BA,MAAO,IAAMC,cAAa,CAAGf,WAAW,CAACE,OAAlC"},"metadata":{},"sourceType":"module"}