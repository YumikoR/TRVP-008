{"ast":null,"code":"import _objectSpread from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _defineProperty from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";// Menu.jsx\nimport React,{useEffect}from'react';import{Link}from'react-router-dom';import clsx from'clsx';import IconButton from'@mui/material/IconButton';import DeleteIcon from'@mui/icons-material/Clear';import EditIcon from'@mui/icons-material/Edit';import{List,ListItem,ListItemText,ListItemAvatar,Avatar,Typography}from'@mui/material';import styles from'./Menu.module.scss';import{UserInfo}from'../UserInfo';import{MenuSkeleton}from'./Skeleton';import{useDispatch}from\"react-redux\";import{fetchRemoveMenu}from\"../../redux/slices/menus\";import{Dish}from\"../Dish\";import axios from\"../../axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Menu=function Menu(_ref){var id=_ref.id,day=_ref.day,option=_ref.option,createdAt=_ref.createdAt,user=_ref.user,dishes=_ref.dishes,isFullMenu=_ref.isFullMenu,isLoading=_ref.isLoading,isEditable=_ref.isEditable,userData=_ref.userData;var dispatch=useDispatch();if(isLoading){return/*#__PURE__*/_jsx(MenuSkeleton,{});}var onClickRemove=function onClickRemove(){if(window.confirm('Вы действительно хотите удалить меню?')){dispatch(fetchRemoveMenu(id));}};return/*#__PURE__*/_jsxs(\"div\",{className:clsx(styles.root,_defineProperty({},styles.rootFull,isFullMenu)),children:[isEditable&&/*#__PURE__*/_jsxs(\"div\",{className:styles.editButtons,children:[/*#__PURE__*/_jsx(Link,{to:\"/menu/\".concat(id,\"/edit\"),children:/*#__PURE__*/_jsx(IconButton,{color:\"primary\",children:/*#__PURE__*/_jsx(EditIcon,{})})}),/*#__PURE__*/_jsx(IconButton,{onClick:onClickRemove,color:\"secondary\",children:/*#__PURE__*/_jsx(DeleteIcon,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.wrapper,children:[/*#__PURE__*/_jsx(UserInfo,_objectSpread(_objectSpread({},user),{},{additionalText:createdAt})),/*#__PURE__*/_jsxs(\"div\",{className:styles.indention,children:[/*#__PURE__*/_jsx(\"h2\",{className:clsx(styles.day,_defineProperty({},styles.dayFull,isFullMenu)),children:isFullMenu?/*#__PURE__*/_jsxs(_Fragment,{children:[day,\" - \",option]}):/*#__PURE__*/_jsxs(Link,{to:\"/menu/\".concat(id),children:[day,\" - \\u2116\",option]})}),dishes&&/*#__PURE__*/_jsx(List,{sx:{width:'100%',maxWidth:360,bgcolor:'background.paper'},children:dishes.map(function(dish,index){return/*#__PURE__*/ (// console.log(JSON.stringify({\n//     day,\n//     dishes: dishes.filter((d, i) => i !== index).map((d) => d._id),\n//     option,\n// }))\n// console.log({\n//     day,\n//     dishes: dishes.filter((d, i) => i !== index).map((d) => d._id),\n//     option,\n// })\n_jsx(Dish,{id:dish._id,name:dish.name,user:dish.user,menuId:id,type:dish.typeId.name,avatarUrl:dish.avatarUrl,isLoading:false,isEditable:(userData===null||userData===void 0?void 0:userData._id)===(user===null||user===void 0?void 0:user._id)// flag={JSON.stringify({\n//     day,\n//     dishes: dishes.filter((d, i) => i !== index).map((d) => d._id),\n//     option,\n// })}\n,flag:{day:day,dishes:dishes.filter(function(d,i){return i!==index;}).map(function(d){return d._id;}),option:option}// flag={JSON.stringify(dishes.filter((d, i) => i !== index))}\n},dish._id));})})]})]})]});};","map":{"version":3,"names":["React","useEffect","Link","clsx","IconButton","DeleteIcon","EditIcon","List","ListItem","ListItemText","ListItemAvatar","Avatar","Typography","styles","UserInfo","MenuSkeleton","useDispatch","fetchRemoveMenu","Dish","axios","Menu","id","day","option","createdAt","user","dishes","isFullMenu","isLoading","isEditable","userData","dispatch","onClickRemove","window","confirm","root","rootFull","editButtons","wrapper","indention","dayFull","width","maxWidth","bgcolor","map","dish","index","_id","name","typeId","avatarUrl","filter","d","i"],"sources":["C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/src/components/Menu/index.jsx"],"sourcesContent":["// Menu.jsx\r\nimport React, {useEffect} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport clsx from 'clsx';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport DeleteIcon from '@mui/icons-material/Clear';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport { List, ListItem, ListItemText, ListItemAvatar, Avatar, Typography } from '@mui/material';\r\n\r\nimport styles from './Menu.module.scss';\r\nimport { UserInfo } from '../UserInfo';\r\nimport { MenuSkeleton } from './Skeleton';\r\nimport { useDispatch } from \"react-redux\";\r\nimport { fetchRemoveMenu } from \"../../redux/slices/menus\";\r\nimport { Dish } from \"../Dish\";\r\nimport axios from \"../../axios\";\r\n\r\nexport const Menu = ({\r\n                         id,\r\n                         day,\r\n                         option,\r\n                         createdAt,\r\n                         user,\r\n                         dishes,\r\n                         isFullMenu,\r\n                         isLoading,\r\n                         isEditable,\r\n                         userData,\r\n                     }) => {\r\n    const dispatch = useDispatch();\r\n    if (isLoading) {\r\n        return <MenuSkeleton/>;\r\n    }\r\n\r\n    const onClickRemove = () => {\r\n        if (window.confirm('Вы действительно хотите удалить меню?')) {\r\n            dispatch(fetchRemoveMenu(id));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={clsx(styles.root, { [styles.rootFull]: isFullMenu })}>\r\n\r\n            {isEditable && (\r\n                <div className={styles.editButtons}>\r\n                    <Link to={`/menu/${id}/edit`}>\r\n                        <IconButton color=\"primary\">\r\n                            <EditIcon />\r\n                        </IconButton>\r\n                    </Link>\r\n                    <IconButton onClick={onClickRemove} color=\"secondary\">\r\n                        <DeleteIcon />\r\n                    </IconButton>\r\n                </div>\r\n            )}\r\n            <div className={styles.wrapper}>\r\n                <UserInfo {...user} additionalText={createdAt} />\r\n                <div className={styles.indention}>\r\n                    <h2 className={clsx(styles.day, { [styles.dayFull]: isFullMenu })}>\r\n                        {isFullMenu ? (\r\n                            <>{day} - {option}</>\r\n                        ) : (\r\n                            <Link to={`/menu/${id}`}>\r\n                                {day} - №{option}\r\n                            </Link>\r\n                        )}\r\n                    </h2>\r\n                    {dishes && (\r\n                        <List sx={{ width: '100%', maxWidth: 360, bgcolor: 'background.paper' }}>\r\n                            {dishes.map((dish, index) => (\r\n                                // console.log(JSON.stringify({\r\n                                //     day,\r\n                                //     dishes: dishes.filter((d, i) => i !== index).map((d) => d._id),\r\n                                //     option,\r\n                                // }))\r\n                                // console.log({\r\n                                //     day,\r\n                                //     dishes: dishes.filter((d, i) => i !== index).map((d) => d._id),\r\n                                //     option,\r\n                                // })\r\n                                <Dish\r\n                                    key={dish._id}\r\n                                    id={dish._id}\r\n                                    name={dish.name}\r\n                                    user={dish.user}\r\n                                    menuId={id}\r\n                                    type={dish.typeId.name}\r\n                                    avatarUrl={dish.avatarUrl}\r\n                                    isLoading={false}\r\n                                    isEditable={userData?._id === user?._id}\r\n                                    // flag={JSON.stringify({\r\n                                    //     day,\r\n                                    //     dishes: dishes.filter((d, i) => i !== index).map((d) => d._id),\r\n                                    //     option,\r\n                                    // })}\r\n                                    flag={{\r\n                                        day,\r\n                                        dishes: dishes.filter((d, i) => i !== index).map((d) => d._id),\r\n                                        option,\r\n                                    }}\r\n                                    // flag={JSON.stringify(dishes.filter((d, i) => i !== index))}\r\n                                />\r\n                            ))}\r\n                        </List>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}