{"ast":null,"code":"// Dish.jsx\nimport React from'react';import{Link}from'react-router-dom';import{ListItem,ListItemAvatar,Avatar,ListItemText,Typography,Divider}from'@mui/material';import IconButton from\"@mui/material/IconButton\";import EditIcon from\"@mui/icons-material/Edit\";import DeleteIcon from\"@mui/icons-material/Clear\";import{fetchRemoveDish}from\"../../redux/slices/dishes\";import{fetchUpdateMenu}from\"../../redux/slices/menus\";import clsx from\"clsx\";import styles from\"../Menu/Menu.module.scss\";import{useDispatch}from\"react-redux\";import{MenuSkeleton}from\"../Menu/Skeleton\";import{UserInfo}from\"../UserInfo\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Dish=function Dish(_ref){var id=_ref.id,name=_ref.name,type=_ref.type,menuId=_ref.menuId,user=_ref.user,createdAt=_ref.createdAt,avatarUrl=_ref.avatarUrl,isLoading=_ref.isLoading,isEditable=_ref.isEditable,flag=_ref.flag;var dispatch=useDispatch();if(isLoading){return/*#__PURE__*/_jsx(MenuSkeleton,{});}var onClickRemove=function onClickRemove(){if(window.confirm('Вы действительно хотите удалить блюдо?')){if(!flag){dispatch(fetchRemoveDish(id));}else{dispatch(fetchUpdateMenu({menuId:menuId,id:id,flag:flag}));}// Вместо fetchRemoveMenu используем fetchRemoveDish\n// Обратите внимание, что передаем id блюда, а не меню\n}};return/*#__PURE__*/_jsx(\"div\",{className:clsx(styles.root),children:isLoading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading dish...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[isEditable&&/*#__PURE__*/_jsxs(\"div\",{className:styles.editButtons,children:[/*#__PURE__*/_jsx(Link,{to:\"/dish/\".concat(id,\"/edit\"),children:/*#__PURE__*/_jsx(IconButton,{color:\"primary\",children:/*#__PURE__*/_jsx(EditIcon,{})})}),/*#__PURE__*/_jsx(IconButton,{onClick:onClickRemove,color:\"secondary\",children:/*#__PURE__*/_jsx(DeleteIcon,{})})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.wrapper,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.indention,children:[/*#__PURE__*/_jsx(\"h2\",{className:clsx(styles.day),children:/*#__PURE__*/_jsx(Link,{to:\"/dish/\".concat(id),children:type})}),/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(ListItem,{alignItems:\"flex-start\",children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{alt:type,src:\"http://localhost:4444\".concat(avatarUrl)})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"\".concat(name)//name\n,secondary:/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Typography,{sx:{display:'inline'},component:\"span\",variant:\"body2\",color:\"text.primary\",children:type})})})]})},id)]})})]})});};","map":{"version":3,"names":["React","Link","ListItem","ListItemAvatar","Avatar","ListItemText","Typography","Divider","IconButton","EditIcon","DeleteIcon","fetchRemoveDish","fetchUpdateMenu","clsx","styles","useDispatch","MenuSkeleton","UserInfo","Dish","id","name","type","menuId","user","createdAt","avatarUrl","isLoading","isEditable","flag","dispatch","onClickRemove","window","confirm","root","editButtons","wrapper","indention","day","display"],"sources":["C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/src/components/Dish/index.jsx"],"sourcesContent":["// Dish.jsx\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ListItem, ListItemAvatar, Avatar, ListItemText, Typography, Divider } from '@mui/material';\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport DeleteIcon from \"@mui/icons-material/Clear\";\r\nimport { fetchRemoveDish } from \"../../redux/slices/dishes\";\r\nimport {fetchUpdateMenu} from \"../../redux/slices/menus\"\r\nimport clsx from \"clsx\";\r\nimport styles from \"../Menu/Menu.module.scss\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {MenuSkeleton} from \"../Menu/Skeleton\";\r\nimport {UserInfo} from \"../UserInfo\";\r\n\r\nexport const Dish = (\r\n    {\r\n        id,\r\n        name,\r\n        type,\r\n        menuId,\r\n        user,\r\n        createdAt,\r\n        avatarUrl,\r\n        isLoading,\r\n        isEditable,\r\n        flag\r\n    }) => {\r\n    const dispatch = useDispatch();\r\n    if (isLoading) {\r\n        return <MenuSkeleton/>;\r\n    }\r\n    const onClickRemove = () => {\r\n        if (window.confirm('Вы действительно хотите удалить блюдо?')) {\r\n            if(!flag) {\r\n                dispatch(fetchRemoveDish(id));\r\n            } else {\r\n                dispatch(fetchUpdateMenu({ menuId: menuId, id: id, flag: flag }));\r\n            }\r\n            // Вместо fetchRemoveMenu используем fetchRemoveDish\r\n            // Обратите внимание, что передаем id блюда, а не меню\r\n\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={clsx(styles.root)}>\r\n            {isLoading ? (\r\n                <div>Loading dish...</div>\r\n            ) : (\r\n                <>\r\n                    {isEditable && (\r\n                        <div className={styles.editButtons}>\r\n                            <Link to={`/dish/${id}/edit`}>\r\n                                <IconButton color=\"primary\">\r\n                                    <EditIcon/>\r\n                                </IconButton>\r\n                            </Link>\r\n                            <IconButton onClick={onClickRemove} color=\"secondary\">\r\n                                <DeleteIcon/>\r\n                            </IconButton>\r\n                        </div>\r\n                    )}\r\n                    <div className={styles.wrapper}>\r\n                        {/*<UserInfo {...user} additionalText={createdAt}/>*/}\r\n                        <div className={styles.indention}>\r\n                            <h2 className={clsx(styles.day)}>\r\n                                <Link to={`/dish/${id}`}>\r\n                                    {type}\r\n                                </Link>\r\n                            </h2>\r\n\r\n                            <React.Fragment key={id}>\r\n                                <ListItem alignItems=\"flex-start\">\r\n                                    <ListItemAvatar>\r\n                                        <Avatar alt={type} src={`http://localhost:4444${avatarUrl}`}/>\r\n                                    </ListItemAvatar>\r\n                                    <ListItemText\r\n                                        primary={`${name}`} //name\r\n                                        secondary={\r\n                                            <React.Fragment>\r\n                                                <Typography\r\n                                                    sx={{display: 'inline'}}\r\n                                                    component=\"span\"\r\n                                                    variant=\"body2\"\r\n                                                    color=\"text.primary\"\r\n                                                >\r\n                                                    {type}\r\n                                                </Typography>\r\n                                            </React.Fragment>\r\n                                        }\r\n                                    />\r\n                                </ListItem>\r\n                                {/*<Divider variant=\"inset\" component=\"li\"/>*/}\r\n                            </React.Fragment>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}