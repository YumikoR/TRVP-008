{"ast":null,"code":"import _objectSpread from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import Typography from'@mui/material/Typography';import TextField from'@mui/material/TextField';import Paper from'@mui/material/Paper';import Button from'@mui/material/Button';import Avatar from'@mui/material/Avatar';import styles from'./Login.module.scss';import{useDispatch,useSelector}from\"react-redux\";import{fetchRegister,selectIsAuth}from\"../../redux/slices/auth\";//fetchRegister\nimport{useForm}from\"react-hook-form\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Registration=function Registration(){var _errors$fullName,_errors$fullName2,_errors$email,_errors$email2,_errors$password,_errors$password2;var isAuth=useSelector(selectIsAuth);var dispatch=useDispatch();var _useForm=useForm({defaultValues:{},mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setError=_useForm.setError,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(fetchRegister(values));case 2:data=_context.sent;if(data.payload){_context.next=7;break;}return _context.abrupt(\"return\",alert('Не удалось зарегистрироваться .'));case 7:if('token'in data.payload){window.localStorage.setItem('token',data.payload.token);}case 8:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();if(isAuth){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsxs(Paper,{classes:{root:styles.root},children:[/*#__PURE__*/_jsx(Typography,{classes:{root:styles.title},variant:\"h5\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u0435 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.avatar,children:/*#__PURE__*/_jsx(Avatar,{sx:{width:100,height:100}})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({className:styles.field,label:\"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F\",error:Boolean((_errors$fullName=errors.fullName)===null||_errors$fullName===void 0?void 0:_errors$fullName.message),helperText:(_errors$fullName2=errors.fullName)===null||_errors$fullName2===void 0?void 0:_errors$fullName2.message},register('fullName',{required:'Укажите полное имя'})),{},{fullWidth:true})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({className:styles.field,label:\"E-Mail\",type:\"email\",error:Boolean((_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message),helperText:(_errors$email2=errors.email)===null||_errors$email2===void 0?void 0:_errors$email2.message},register('email',{required:'Укажите почту'})),{},{fullWidth:true})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({className:styles.field,label:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",error:Boolean((_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message),helperText:(_errors$password2=errors.password)===null||_errors$password2===void 0?void 0:_errors$password2.message},register('password',{required:'Укажите пароль'})),{},{fullWidth:true})),/*#__PURE__*/_jsx(Button,{disabled:!isValid,type:\"submit\",size:\"large\",variant:\"contained\",fullWidth:true,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"})]})]});};","map":{"version":3,"names":["React","Typography","TextField","Paper","Button","Avatar","styles","useDispatch","useSelector","fetchRegister","selectIsAuth","useForm","Navigate","Registration","isAuth","dispatch","defaultValues","mode","register","handleSubmit","setError","formState","errors","isValid","onSubmit","values","data","payload","alert","window","localStorage","setItem","token","root","title","avatar","width","height","field","Boolean","fullName","message","required","email","password"],"sources":["C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/src/pages/Registration/index.jsx"],"sourcesContent":["import React from 'react';\r\nimport Typography from '@mui/material/Typography';\r\nimport TextField from '@mui/material/TextField';\r\nimport Paper from '@mui/material/Paper';\r\nimport Button from '@mui/material/Button';\r\nimport Avatar from '@mui/material/Avatar';\r\n\r\nimport styles from './Login.module.scss';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {fetchRegister, selectIsAuth} from \"../../redux/slices/auth\"; //fetchRegister\r\nimport {useForm} from \"react-hook-form\";\r\nimport {Navigate} from \"react-router-dom\";\r\n\r\nexport const Registration = () => {\r\n    const isAuth = useSelector(selectIsAuth);\r\n    const dispatch = useDispatch();\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setError,\r\n        formState: {errors, isValid}\r\n    } = useForm({\r\n        defaultValues: {\r\n\r\n        },\r\n        mode: 'onChange'\r\n    })\r\n\r\n    const onSubmit = async (values) => {\r\n        const data = await dispatch(fetchRegister(values));\r\n        if (!data.payload) {\r\n            return alert('Не удалось зарегистрироваться .')\r\n        } else {\r\n            if ('token' in data.payload) {\r\n                window.localStorage.setItem('token', data.payload.token);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (isAuth) {\r\n        return <Navigate to=\"/\"/>\r\n    }\r\n\r\n    return (\r\n        <Paper classes={{root: styles.root}}>\r\n            <Typography classes={{root: styles.title}} variant=\"h5\">\r\n                Создание аккаунта\r\n            </Typography>\r\n            <div className={styles.avatar}>\r\n                <Avatar sx={{width: 100, height: 100}}/>\r\n            </div>\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <TextField\r\n                    className={styles.field}\r\n                    label=\"Полное имя\"\r\n                    error={Boolean(errors.fullName?.message)}\r\n                    helperText={errors.fullName?.message}\r\n                    {...register('fullName', {required: 'Укажите полное имя'})}\r\n                    fullWidth\r\n                /><TextField\r\n                className={styles.field}\r\n                label=\"E-Mail\"\r\n                type=\"email\"\r\n                error={Boolean(errors.email?.message)}\r\n                helperText={errors.email?.message}\r\n                {...register('email', {required: 'Укажите почту'})}\r\n                fullWidth\r\n            /><TextField\r\n                className={styles.field}\r\n                label=\"Пароль\"\r\n                type=\"password\"\r\n                error={Boolean(errors.password?.message)}\r\n                helperText={errors.password?.message}\r\n                {...register('password', {required: 'Укажите пароль'})}\r\n                fullWidth\r\n            />\r\n                <Button disabled={!isValid} type=\"submit\" size=\"large\" variant=\"contained\" fullWidth>\r\n                    Зарегистрировать аккаунт\r\n                </Button>\r\n            </form>\r\n        </Paper>\r\n    );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}