{"ast":null,"code":"import _toConsumableArray from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Home.jsx\nimport React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import Tabs from'@mui/material/Tabs';import Tab from'@mui/material/Tab';import Grid from'@mui/material/Grid';import{Menu}from'../components/Menu';import{Dish}from'../components/Dish';import{TagsBlock}from'../components/TagsBlock';import{CommentsBlock}from'../components/CommentsBlock';import{fetchMenu,transferDishes}from'../redux/slices/menus';import{fetchDishes}from'../redux/slices/dishes';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Home=function Home(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.menus;}),menus=_useSelector.menus;var _useSelector2=useSelector(function(state){return state.dishes;}),dishes=_useSelector2.dishes;var userData=useSelector(function(state){return state.auth.data;});// const {menusList} = useSelector((state) => state.menu.items); // с автообновлением чет сделать\nvar isDishesLoading=dishes.status==='loading';var isMenusLoading=menus.status==='loading';var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedDishes=_useState2[0],setSelectedDishes=_useState2[1];useEffect(function(){dispatch(fetchMenu());dispatch(fetchDishes());// dispatch()\n},[dispatch]);console.log(menus);console.log(dishes);var handleTransferButtonClick=function handleTransferButtonClick(){// Handle the transfer logic using the selected dishes\nvar sourceMenuId='yourSourceMenuId';// Replace with the actual source menu ID\nvar targetMenuId='yourTargetMenuId';// Replace with the actual target menu ID\ndispatch(transferDishes({sourceMenuId:sourceMenuId,targetMenuId:targetMenuId,dishIds:selectedDishes}));// Reset the selected dishes state\nsetSelectedDishes([]);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Tabs,{style:{marginBottom:15},value:0,\"aria-label\":\"basic tabs example\",children:[/*#__PURE__*/_jsx(Tab,{label:\"\\u041D\\u043E\\u0432\\u044B\\u0435\"}),/*#__PURE__*/_jsx(Tab,{label:\"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u044B\\u0435\"})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{xs:8,item:true,children:(isMenusLoading?_toConsumableArray(Array(5)):menus.items).map(function(obj,index){return isMenusLoading?/*#__PURE__*/_jsx(Menu,{isLoading:true},index):/*#__PURE__*/_jsx(Menu,{id:obj._id,day:\"\".concat(obj.day),user:obj.user,userData:userData,createdAt:new Date(obj.createdAt).toLocaleDateString('ru-RU'),dishes:sortDishesByTypeOrder(_toConsumableArray(obj.dishes)),option:obj.option,isEditable:(userData===null||userData===void 0?void 0:userData._id)===obj.user._id});})}),/*#__PURE__*/_jsx(Grid,{xs:4,item:true,children:(isDishesLoading?_toConsumableArray(Array(5)):dishes.items).map(function(obj,index){return isDishesLoading?/*#__PURE__*/_jsx(Dish,{isLoading:true},index):/*#__PURE__*/_jsx(Dish,{id:obj._id,name:obj.name,user:obj.user,type:obj.typeId.name,avatarUrl:obj.avatarUrl,isLoading:false,isEditable:(userData===null||userData===void 0?void 0:userData._id)===(obj===null||obj===void 0?void 0:obj.user)// isEditable={true}\n},obj._id);})})]})]});};function sortDishesByTypeOrder(dishes){var dishTypesOrder=['Горячее','Супы','Салаты','Сладкие напитки','Десерты','Алкогольные напитки'];return dishes.sort(function(a,b){var typeAIndex=dishTypesOrder.indexOf(a.typeId.name);var typeBIndex=dishTypesOrder.indexOf(b.typeId.name);return typeAIndex-typeBIndex;});}","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","Tabs","Tab","Grid","Menu","Dish","TagsBlock","CommentsBlock","fetchMenu","transferDishes","fetchDishes","Home","dispatch","state","menus","dishes","userData","auth","data","isDishesLoading","status","isMenusLoading","selectedDishes","setSelectedDishes","console","log","handleTransferButtonClick","sourceMenuId","targetMenuId","dishIds","marginBottom","Array","items","map","obj","index","_id","day","user","Date","createdAt","toLocaleDateString","sortDishesByTypeOrder","option","name","typeId","avatarUrl","dishTypesOrder","sort","a","b","typeAIndex","indexOf","typeBIndex"],"sources":["C:/Users/admin/PycharmProjects/dz_trvp/trvp_dz/frontend/src/pages/Home.jsx"],"sourcesContent":["// Home.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport Tab from '@mui/material/Tab';\r\nimport Grid from '@mui/material/Grid';\r\n\r\nimport { Menu } from '../components/Menu';\r\nimport { Dish } from '../components/Dish';\r\nimport { TagsBlock } from '../components/TagsBlock';\r\nimport { CommentsBlock } from '../components/CommentsBlock';\r\nimport { fetchMenu, transferDishes } from '../redux/slices/menus';\r\nimport { fetchDishes } from '../redux/slices/dishes';\r\n\r\nexport const Home = () => {\r\n    const dispatch = useDispatch();\r\n    const { menus } = useSelector((state) => state.menus);\r\n    const { dishes } = useSelector((state) => state.dishes);\r\n    const userData = useSelector((state) => state.auth.data);\r\n    // const {menusList} = useSelector((state) => state.menu.items); // с автообновлением чет сделать\r\n\r\n    const isDishesLoading = dishes.status === 'loading';\r\n    const isMenusLoading = menus.status === 'loading';\r\n\r\n    const [selectedDishes, setSelectedDishes] = useState([]);\r\n\r\n    useEffect(() => {\r\n        dispatch(fetchMenu());\r\n        dispatch(fetchDishes());\r\n        // dispatch()\r\n    }, [dispatch]);\r\n\r\n    console.log(menus);\r\n    console.log(dishes);\r\n\r\n\r\n    const handleTransferButtonClick = () => {\r\n        // Handle the transfer logic using the selected dishes\r\n        const sourceMenuId = 'yourSourceMenuId';  // Replace with the actual source menu ID\r\n        const targetMenuId = 'yourTargetMenuId';  // Replace with the actual target menu ID\r\n\r\n        dispatch(transferDishes({ sourceMenuId, targetMenuId, dishIds: selectedDishes }));\r\n        // Reset the selected dishes state\r\n        setSelectedDishes([]);\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n\r\n            <Tabs style={{ marginBottom: 15 }} value={0} aria-label=\"basic tabs example\">\r\n                <Tab label=\"Новые\" />\r\n                <Tab label=\"Популярные\" />\r\n            </Tabs>\r\n            <Grid container spacing={4}>\r\n                <Grid xs={8} item>\r\n                    {/* Ваш код для отображения меню */}\r\n                    {(isMenusLoading ? [...Array(5)] : menus.items).map((obj, index) =>\r\n                        isMenusLoading ? (\r\n                            <Menu key={index} isLoading={true} />\r\n                        ) : (\r\n                            <Menu\r\n                                id={obj._id}\r\n                                day={`${obj.day}`}\r\n                                user={obj.user}\r\n                                userData={userData}\r\n                                createdAt={new Date(obj.createdAt).toLocaleDateString('ru-RU')}\r\n                                dishes={sortDishesByTypeOrder([...obj.dishes])}\r\n                                option={obj.option}\r\n                                isEditable={userData?._id === obj.user._id}\r\n                            />\r\n                        )\r\n                    )}\r\n                </Grid>\r\n                <Grid xs={4} item>\r\n                    {(isDishesLoading ? [...Array(5)] : dishes.items).map((obj, index) =>\r\n                        isDishesLoading ? (\r\n                            <Dish key={index} isLoading={true} />\r\n                        ) : (\r\n                            <Dish\r\n                                key={obj._id}\r\n                                id={obj._id}\r\n                                name={obj.name}\r\n                                user={obj.user}\r\n                                type={obj.typeId.name}\r\n                                avatarUrl={obj.avatarUrl}\r\n                                isLoading={false}\r\n                                isEditable={userData?._id === obj?.user}\r\n                                // isEditable={true}\r\n                            />\r\n                        )\r\n                    )}\r\n                </Grid>\r\n            </Grid>\r\n        </>\r\n    );\r\n};\r\n\r\nfunction sortDishesByTypeOrder(dishes) {\r\n    const dishTypesOrder = ['Горячее', 'Супы', 'Салаты', 'Сладкие напитки', 'Десерты', 'Алкогольные напитки'];\r\n    return dishes.sort((a, b) => {\r\n        const typeAIndex = dishTypesOrder.indexOf(a.typeId.name);\r\n        const typeBIndex = dishTypesOrder.indexOf(b.typeId.name);\r\n\r\n        return typeAIndex - typeBIndex;\r\n    });\r\n}\r\n"],"mappings":"kSAAA;AACA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,KAAP,KAAiB,oBAAjB,CACA,MAAOC,IAAP,KAAgB,mBAAhB,CACA,MAAOC,KAAP,KAAiB,oBAAjB,CAEA,OAASC,IAAT,KAAqB,oBAArB,CACA,OAASC,IAAT,KAAqB,oBAArB,CACA,OAASC,SAAT,KAA0B,yBAA1B,CACA,OAASC,aAAT,KAA8B,6BAA9B,CACA,OAASC,SAAT,CAAoBC,cAApB,KAA0C,uBAA1C,CACA,OAASC,WAAT,KAA4B,wBAA5B,C,6IAEA,MAAO,IAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACtB,GAAMC,SAAQ,CAAGb,WAAW,EAA5B,CACA,iBAAkBC,WAAW,CAAC,SAACa,KAAD,QAAWA,MAAK,CAACC,KAAjB,EAAD,CAA7B,CAAQA,KAAR,cAAQA,KAAR,CACA,kBAAmBd,WAAW,CAAC,SAACa,KAAD,QAAWA,MAAK,CAACE,MAAjB,EAAD,CAA9B,CAAQA,MAAR,eAAQA,MAAR,CACA,GAAMC,SAAQ,CAAGhB,WAAW,CAAC,SAACa,KAAD,QAAWA,MAAK,CAACI,IAAN,CAAWC,IAAtB,EAAD,CAA5B,CACA;AAEA,GAAMC,gBAAe,CAAGJ,MAAM,CAACK,MAAP,GAAkB,SAA1C,CACA,GAAMC,eAAc,CAAGP,KAAK,CAACM,MAAN,GAAiB,SAAxC,CAEA,cAA4CtB,QAAQ,CAAC,EAAD,CAApD,wCAAOwB,cAAP,eAAuBC,iBAAvB,eAEA1B,SAAS,CAAC,UAAM,CACZe,QAAQ,CAACJ,SAAS,EAAV,CAAR,CACAI,QAAQ,CAACF,WAAW,EAAZ,CAAR,CACA;AACH,CAJQ,CAIN,CAACE,QAAD,CAJM,CAAT,CAMAY,OAAO,CAACC,GAAR,CAAYX,KAAZ,EACAU,OAAO,CAACC,GAAR,CAAYV,MAAZ,EAGA,GAAMW,0BAAyB,CAAG,QAA5BA,0BAA4B,EAAM,CACpC;AACA,GAAMC,aAAY,CAAG,kBAArB,CAA0C;AAC1C,GAAMC,aAAY,CAAG,kBAArB,CAA0C;AAE1ChB,QAAQ,CAACH,cAAc,CAAC,CAAEkB,YAAY,CAAZA,YAAF,CAAgBC,YAAY,CAAZA,YAAhB,CAA8BC,OAAO,CAAEP,cAAvC,CAAD,CAAf,CAAR,CACA;AACAC,iBAAiB,CAAC,EAAD,CAAjB,CACH,CARD,CAWA,mBACI,wCAEI,MAAC,IAAD,EAAM,KAAK,CAAE,CAAEO,YAAY,CAAE,EAAhB,CAAb,CAAmC,KAAK,CAAE,CAA1C,CAA6C,aAAW,oBAAxD,wBACI,KAAC,GAAD,EAAK,KAAK,CAAC,gCAAX,EADJ,cAEI,KAAC,GAAD,EAAK,KAAK,CAAC,8DAAX,EAFJ,GAFJ,cAMI,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,wBACI,KAAC,IAAD,EAAM,EAAE,CAAE,CAAV,CAAa,IAAI,KAAjB,UAEK,CAACT,cAAc,oBAAOU,KAAK,CAAC,CAAD,CAAZ,EAAmBjB,KAAK,CAACkB,KAAxC,EAA+CC,GAA/C,CAAmD,SAACC,GAAD,CAAMC,KAAN,QAChDd,eAAc,cACV,KAAC,IAAD,EAAkB,SAAS,CAAE,IAA7B,EAAWc,KAAX,CADU,cAGV,KAAC,IAAD,EACI,EAAE,CAAED,GAAG,CAACE,GADZ,CAEI,GAAG,WAAKF,GAAG,CAACG,GAAT,CAFP,CAGI,IAAI,CAAEH,GAAG,CAACI,IAHd,CAII,QAAQ,CAAEtB,QAJd,CAKI,SAAS,CAAE,GAAIuB,KAAJ,CAASL,GAAG,CAACM,SAAb,EAAwBC,kBAAxB,CAA2C,OAA3C,CALf,CAMI,MAAM,CAAEC,qBAAqB,oBAAKR,GAAG,CAACnB,MAAT,EANjC,CAOI,MAAM,CAAEmB,GAAG,CAACS,MAPhB,CAQI,UAAU,CAAE,CAAA3B,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAEoB,GAAV,IAAkBF,GAAG,CAACI,IAAJ,CAASF,GAR3C,EAJ4C,EAAnD,CAFL,EADJ,cAoBI,KAAC,IAAD,EAAM,EAAE,CAAE,CAAV,CAAa,IAAI,KAAjB,UACK,CAACjB,eAAe,oBAAOY,KAAK,CAAC,CAAD,CAAZ,EAAmBhB,MAAM,CAACiB,KAA1C,EAAiDC,GAAjD,CAAqD,SAACC,GAAD,CAAMC,KAAN,QAClDhB,gBAAe,cACX,KAAC,IAAD,EAAkB,SAAS,CAAE,IAA7B,EAAWgB,KAAX,CADW,cAGX,KAAC,IAAD,EAEI,EAAE,CAAED,GAAG,CAACE,GAFZ,CAGI,IAAI,CAAEF,GAAG,CAACU,IAHd,CAII,IAAI,CAAEV,GAAG,CAACI,IAJd,CAKI,IAAI,CAAEJ,GAAG,CAACW,MAAJ,CAAWD,IALrB,CAMI,SAAS,CAAEV,GAAG,CAACY,SANnB,CAOI,SAAS,CAAE,KAPf,CAQI,UAAU,CAAE,CAAA9B,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAEoB,GAAV,KAAkBF,GAAlB,SAAkBA,GAAlB,iBAAkBA,GAAG,CAAEI,IAAvB,CACZ;AATJ,EACSJ,GAAG,CAACE,GADb,CAJ8C,EAArD,CADL,EApBJ,GANJ,GADJ,CAiDH,CAlFM,CAoFP,QAASM,sBAAT,CAA+B3B,MAA/B,CAAuC,CACnC,GAAMgC,eAAc,CAAG,CAAC,SAAD,CAAY,MAAZ,CAAoB,QAApB,CAA8B,iBAA9B,CAAiD,SAAjD,CAA4D,qBAA5D,CAAvB,CACA,MAAOhC,OAAM,CAACiC,IAAP,CAAY,SAACC,CAAD,CAAIC,CAAJ,CAAU,CACzB,GAAMC,WAAU,CAAGJ,cAAc,CAACK,OAAf,CAAuBH,CAAC,CAACJ,MAAF,CAASD,IAAhC,CAAnB,CACA,GAAMS,WAAU,CAAGN,cAAc,CAACK,OAAf,CAAuBF,CAAC,CAACL,MAAF,CAASD,IAAhC,CAAnB,CAEA,MAAOO,WAAU,CAAGE,UAApB,CACH,CALM,CAAP,CAMH"},"metadata":{},"sourceType":"module"}